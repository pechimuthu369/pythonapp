{% extends 'base.html' %}

{% block content %}
<form method="post" id="object_form" enctype="multipart/form-data">
  <br><br><br>
  <div>
    <h1>{% block title %} Welcome to Object Finder Demo {% endblock %}</h1>
    <br/><br/><br/>
    <p><img src="/images/placeholder.jpg" id="img_placehoder" width="640" height="360"/></p>
    <p><input type="file" name="file"></p>
    <p><button type="submit">submit</button></p>
  </div>
</form>
<script type="text/javascript">
  $(document).on('submit', '#object_form', function (e) {
    e.preventDefault();    
    console.log("hehehehehe");
    uploadfiles();
    //getObjectDetails('https://picsum.photos/500/300?random=1');
  });

  function uploadfiles() {
    $.ajax({
			url: '/uploadfiles',
			data: $('form').serialize(),
			type: 'POST',
			success: function(response){
				console.log(response);
			},
			error: function(error){
				console.log(error);
			}
		});
  }

  function getObjectDetails(url) {
    $.getJSON('/getobjectdetails/' + encodeURIComponent(url),function (data) {
        console.log(data)
        $("#result").text(data["result"]["tags"][1]["tag"]["en"]);
      });
  }
</script>
{% endblock %}