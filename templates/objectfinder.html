{% extends 'base.html' %}

{% block content %}
<form method="post" id="object-form">
    <br><br><br>
    <div>
        <h1>{% block title %} Welcome to Object Finder Demo {% endblock %}</h1>
        <img src="https://picsum.photos/200/300?random=1" />
        <button type="submit">submit</button>
    </div>    
    <div id="result" name="result"></div>
</form>
  <script type="text/javascript">
    $(document).on('submit','#object-form',function(e){                    
    e.preventDefault();
    getObjectDetails('https://i.picsum.photos/id/504/200/200.jpg?hmac=uNktbiKQMUD0MuwgQUxt7R2zjHBGFxyUSG3prhX0FWM');
    });

    function getObjectDetails(url) {      
      $.getJSON('/findobject/'+ encodeURIComponent(url),
        function(data) { 
        console.log(data)
          $("#result").text(data["result"]["tags"][1]["tag"]["en"]);
        });
    }
  </script>
{% endblock %}